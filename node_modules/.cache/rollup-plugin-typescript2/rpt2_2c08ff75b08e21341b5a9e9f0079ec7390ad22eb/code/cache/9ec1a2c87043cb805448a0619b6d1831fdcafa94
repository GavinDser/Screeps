{"code":"//解决： centercreep会有莫名奇妙存留在自身的energy无法清零的情况\r\nexport const CenterCreep = {\r\n    run: function (creep) {\r\n        if (!(creep.pos.isEqualTo(new RoomPosition(creep.memory.position[0], creep.memory.position[1], creep.memory.homeRoom)))) {\r\n            creep.moveTo(new RoomPosition(creep.memory.position[0], creep.memory.position[1], creep.memory.homeRoom));\r\n        }\r\n        else {\r\n            if (creep.memory.homeRoom == \"E35S47\") {\r\n                let linkPoint = Game.getObjectById('61a3f58732b74f02f5a76f1a');\r\n                let factory = Game.getObjectById(\"61ba7016a2783d8fd293aaab\");\r\n                if (linkPoint && linkPoint.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\r\n                    for (const resourceType in creep.store) {\r\n                        if (creep.transfer(creep.room.storage, resourceType) == ERR_NOT_IN_RANGE) {\r\n                        }\r\n                    }\r\n                    creep.withdraw(linkPoint, RESOURCE_ENERGY);\r\n                }\r\n                else if (factory.cooldown < 6 && creep.room.storage.store[RESOURCE_ZYNTHIUM] > 5000) {\r\n                    if (creep.store[RESOURCE_ZYNTHIUM_BAR] > 0) {\r\n                        creep.transfer(creep.room.storage, RESOURCE_ZYNTHIUM_BAR);\r\n                    }\r\n                    else if (factory.store[RESOURCE_ZYNTHIUM_BAR] > 0) {\r\n                        creep.withdraw(factory, RESOURCE_ZYNTHIUM_BAR);\r\n                    }\r\n                    else if (creep.store[RESOURCE_ZYNTHIUM] > 0) {\r\n                        creep.transfer(factory, RESOURCE_ZYNTHIUM);\r\n                    }\r\n                    else if (factory.store[RESOURCE_ENERGY] < 200 && creep.room.storage[RESOURCE_ZYNTHIUM] > 6000) {\r\n                        creep.transfer(factory, RESOURCE_ENERGY);\r\n                        creep.withdraw(creep.room.storage, RESOURCE_ENERGY);\r\n                    }\r\n                    else if (factory.store[RESOURCE_ZYNTHIUM] < 500 && creep.room.storage[RESOURCE_ZYNTHIUM] > 6000) {\r\n                        creep.withdraw(creep.room.storage, RESOURCE_ZYNTHIUM);\r\n                    }\r\n                    else {\r\n                        if (factory.cooldown < 1) {\r\n                            factory.produce(RESOURCE_ZYNTHIUM_BAR);\r\n                        }\r\n                    }\r\n                }\r\n                // else if (creep.memory.working == true){\r\n                //     // console.log('hw')\r\n                //     if (terminal.transferResource(creep,RESOURCE_ENERGY,100000,'E37S48') == 0){\r\n                //         if(creep.room.terminal.send(RESOURCE_ENERGY,100000,\"E37S48\") == 0){\r\n                //             creep.memory.working = false\r\n                //         }\r\n                //     }\r\n                // }\r\n            }\r\n            if (creep.memory.homeRoom == \"E39S47\") {\r\n                let factory = Game.getObjectById(\"61e5f5e94aca3a629c20a8e7\");\r\n                let linkPoint = Game.getObjectById('61e4e758883aa8f6df8c1c5d');\r\n                if (linkPoint && linkPoint.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\r\n                    for (const resourceType in creep.store) {\r\n                        if (creep.transfer(creep.room.storage, resourceType) == ERR_NOT_IN_RANGE) {\r\n                        }\r\n                    }\r\n                    creep.withdraw(linkPoint, RESOURCE_ENERGY);\r\n                }\r\n                else if (creep.room.terminal.store[RESOURCE_ENERGY] > 0) {\r\n                    if (creep.store.getFreeCapacity() == 0) {\r\n                        for (const resourceType in creep.store) {\r\n                            if (creep.transfer(creep.room.storage, resourceType) == ERR_NOT_IN_RANGE) {\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        creep.withdraw(creep.room.terminal, RESOURCE_ENERGY);\r\n                    }\r\n                }\r\n                else if (factory.cooldown < 6 && creep.room.storage.store[RESOURCE_UTRIUM] > 5000) {\r\n                    if (creep.store[RESOURCE_UTRIUM_BAR] > 0) {\r\n                        creep.transfer(creep.room.storage, RESOURCE_UTRIUM_BAR);\r\n                    }\r\n                    else if (factory.store[RESOURCE_UTRIUM_BAR] > 0) {\r\n                        creep.withdraw(factory, RESOURCE_UTRIUM_BAR);\r\n                    }\r\n                    else if (creep.store[RESOURCE_UTRIUM] > 0) {\r\n                        creep.transfer(factory, RESOURCE_UTRIUM);\r\n                    }\r\n                    else if (factory.store[RESOURCE_ENERGY] < 200 && creep.room.storage[RESOURCE_UTRIUM] > 6000) {\r\n                        creep.transfer(factory, RESOURCE_ENERGY);\r\n                        creep.withdraw(creep.room.storage, RESOURCE_ENERGY);\r\n                    }\r\n                    else if (factory.store[RESOURCE_UTRIUM] < 500 && creep.room.storage[RESOURCE_UTRIUM] > 6000) {\r\n                        creep.withdraw(creep.room.storage, RESOURCE_UTRIUM);\r\n                    }\r\n                    else {\r\n                        if (factory.cooldown < 1) {\r\n                            factory.produce(RESOURCE_UTRIUM_BAR);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (creep.memory.homeRoom == \"E37S48\") {\r\n                let linkPoint = Game.getObjectById('61e7d673c32f8f7570ad7e44');\r\n                if (linkPoint && linkPoint.store.getUsedCapacity(RESOURCE_ENERGY) > 0) {\r\n                    creep.withdraw(linkPoint, RESOURCE_ENERGY);\r\n                }\r\n                if (creep.room.terminal.store[RESOURCE_ENERGY] > 0 && creep.store[RESOURCE_ENERGY] != creep.store.getCapacity()) {\r\n                    creep.withdraw(creep.room.terminal, RESOURCE_ENERGY);\r\n                }\r\n                else {\r\n                    creep.transfer(creep.room.storage, RESOURCE_ENERGY);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=CenterCreep.js.map","references":["D:/Screeps文件/Screeps/node_modules/@types/lodash/index.d.ts","D:/Screeps文件/Screeps/node_modules/typescript/lib/typescript.d.ts","D:/Screeps文件/Screeps/src/modules/Terminal/Terminal.ts"],"map":"{\"version\":3,\"file\":\"CenterCreep.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/modules/Creep/CenterCreep.ts\"],\"names\":[],\"mappings\":\"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\"}"}
