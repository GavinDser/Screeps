{"code":"export const Terminal = {\r\n    prepareBuyOrder: function (creep, orderId) {\r\n        let order = Game.market.getOrderById(orderId);\r\n        // order is not found or order id is wrong\r\n        if (order == undefined) {\r\n            return -100;\r\n        }\r\n        else {\r\n            let cost = Game.market.calcTransactionCost(order.amount, creep.room.name, order.roomName);\r\n            if (creep.room.terminal.store[RESOURCE_ENERGY] < cost) {\r\n                creep.withdraw(creep.room.storage, RESOURCE_ENERGY);\r\n                creep.transfer(creep.room.terminal, RESOURCE_ENERGY);\r\n                return -1;\r\n            }\r\n            //够满则return 0\r\n            else {\r\n                return 0;\r\n            }\r\n        }\r\n    },\r\n    transferResource: function (creep, resourceT, amount, targetRoom) {\r\n        let cost = Game.market.calcTransactionCost(amount, creep.memory.homeRoom, targetRoom);\r\n        let total;\r\n        if (resourceT == RESOURCE_ENERGY) {\r\n            total = cost + amount;\r\n        }\r\n        else {\r\n            total = amount;\r\n        }\r\n        if (resourceT == RESOURCE_ENERGY) {\r\n            total = amount + cost;\r\n        }\r\n        else {\r\n            total = amount;\r\n        }\r\n        if (creep.room.terminal.store[RESOURCE_ENERGY] < cost) {\r\n            creep.withdraw(creep.room.storage, RESOURCE_ENERGY);\r\n            creep.transfer(creep.room.terminal, RESOURCE_ENERGY);\r\n            return -1;\r\n        }\r\n        if (creep.room.terminal.store[resourceT] < total) {\r\n            creep.withdraw(creep.room.storage, resourceT);\r\n            creep.transfer(creep.room.terminal, resourceT);\r\n            return -1;\r\n        }\r\n        //够满则return 0\r\n        else {\r\n            return 0;\r\n        }\r\n    }\r\n};\r\n// 放在room terminal的memory\r\n//# sourceMappingURL=Terminal.js.map","references":[],"map":"{\"version\":3,\"file\":\"Terminal.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/modules/Terminal/Terminal.ts\"],\"names\":[],\"mappings\":\"AAAA,MAAM,CAAC,MAAM,QAAQ,GAAG;IACpB,eAAe,EAAE,UAAS,KAAY,EAAG,OAAe;QACpD,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAC9C,0CAA0C;QAC1C,IAAI,KAAK,IAAI,SAAS,EAAC;YACnB,OAAO,CAAC,GAAG,CAAC;SACf;aACG;YACA,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,KAAK,CAAC,MAAM,EAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YACxF,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,IAAI,EAAC;gBAClD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,eAAe,CAAC,CAAC;gBACnD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAC,eAAe,CAAC,CAAC;gBACpD,OAAO,CAAC,CAAC,CAAC;aACb;YACD,aAAa;iBACT;gBACA,OAAO,CAAC,CAAC;aACZ;SACJ;IAEL,CAAC;IAED,gBAAgB,EAAE,UAAS,KAAY,EAAE,SAA2B,EAAE,MAAc,EAAE,UAAkB;QACpG,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,MAAM,EAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAC,UAAU,CAAC,CAAC;QACpF,IAAI,KAAK,CAAC;QACV,IAAI,SAAS,IAAI,eAAe,EAAC;YAC7B,KAAK,GAAG,IAAI,GAAG,MAAM,CAAC;SACzB;aACG;YACA,KAAK,GAAG,MAAM,CAAA;SACjB;QACD,IAAI,SAAS,IAAI,eAAe,EAAC;YAC7B,KAAK,GAAG,MAAM,GAAG,IAAI,CAAC;SACzB;aACG;YACA,KAAK,GAAG,MAAM,CAAC;SAClB;QACD,IAAI,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,eAAe,CAAC,GAAG,IAAI,EAAC;YAClD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,eAAe,CAAC,CAAC;YACnD,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAC,eAAe,CAAC,CAAC;YACpD,OAAO,CAAC,CAAC,CAAC;SACb;QAED,IAAG,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,KAAK,EAAC;YAC5C,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAC,SAAS,CAAC,CAAC;YAC7C,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAC,SAAS,CAAC,CAAC;YAC9C,OAAO,CAAC,CAAC,CAAC;SACb;QACD,aAAa;aACT;YACA,OAAO,CAAC,CAAC;SACZ;IACL,CAAC;CAIJ,CAAA;AAED,yBAAyB\"}"}
